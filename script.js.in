var rectangle;
var map;
var infoWindow;

var data = {{DATA}};

function initialize() {

    var map = new google.maps.Map(document.getElementById('map-canvas'), {
        zoom: 8,
        center: new google.maps.LatLng(data['lat'], data['lon']),
        mapTypeId: google.maps.MapTypeId.TERRAIN
    });

    var make_listener = function(url) {
        return function(event) {
            window.open(url, '_blank');
        };
    };

    var quads = data['quads'];

    for (i=0; i < quads.length; i++) {
        q = quads[i];
        var rectangle = new google.maps.Rectangle({
	    strokeColor: '#000000',
            strokeOpacity: 1,
            strokeWeight: 1,
            fillColor: '#008000',
            fillOpacity: .2,
	    editable: false,
            draggable: false,
            map: map,
            bounds: new google.maps.LatLngBounds(
                new google.maps.LatLng(q.lat1, q.lon1),
                new google.maps.LatLng(q.lat2, q.lon2)
            )
        });
        var listener = make_listener(q.url);
        google.maps.event.addListener(rectangle, 'click', listener);
    }
}
google.maps.event.addDomListener(window, 'load', initialize);
